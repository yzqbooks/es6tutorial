import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o,c,a as n,b as s,d as t,e as l}from"./app-bede4f5a.js";const i={},u=l(`<h1 id="intl-relativetimeformat" tabindex="-1"><a class="header-anchor" href="#intl-relativetimeformat" aria-hidden="true">#</a> Intl.RelativeTimeFormat</h1><p>很多日期库支持显示相对时间，比如“昨天”、“五分钟前”、“两个月之前”等等。由于不同的语言，日期显示的格式和相关词语都不同，造成这些库的体积非常大。</p><p>现在，浏览器提供内置的 Intl.RelativeTimeFormat API，可以不使用这些库，直接显示相对时间。</p><h2 id="基本用法" tabindex="-1"><a class="header-anchor" href="#基本用法" aria-hidden="true">#</a> 基本用法</h2><p><code>Intl.RelativeTimeFormat()</code>是一个构造函数，接受一个语言代码作为参数，返回一个相对时间的实例对象。如果省略参数，则默认传入当前运行时的语言代码。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> rtf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>RelativeTimeFormat</span><span class="token punctuation">(</span><span class="token string">&#39;en&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token string">&#39;second&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;in 3.14 seconds&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">&#39;minute&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;15 minutes ago&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&#39;hour&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;in 8 hours&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;2 days ago&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;week&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;in 3 weeks&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;5 months ago&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;quarter&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;in 2 quarters&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">&#39;year&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;42 years ago&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码指定使用英语显示相对时间。</p><p>下面是使用西班牙语显示相对时间的例子。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> rtf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>RelativeTimeFormat</span><span class="token punctuation">(</span><span class="token string">&#39;es&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token string">&#39;second&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;dentro de 3,14 segundos&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">&#39;minute&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hace 15 minutos&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&#39;hour&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;dentro de 8 horas&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hace 2 días&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;week&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;dentro de 3 semanas&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hace 5 meses&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;quarter&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;dentro de 2 trimestres&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">&#39;year&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hace 42 años&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Intl.RelativeTimeFormat()</code>还可以接受一个配置对象，作为第二个参数，用来精确指定相对时间实例的行为。配置对象共有下面这些属性。</p><ul><li>options.style：表示返回字符串的风格，可能的值有<code>long</code>（默认值，比如“in 1 month”）、<code>short</code>（比如“in 1 mo.”）、<code>narrow</code>（比如“in 1 mo.”）。对于一部分语言来说，<code>narrow</code>风格和<code>short</code>风格是类似的。</li><li>options.localeMatcher：表示匹配语言参数的算法，可能的值有<code>best fit</code>（默认值）和<code>lookup</code>。</li><li>options.numeric：表示返回字符串是数字显示，还是文字显示，可能的值有<code>always</code>（默认值，总是文字显示）和<code>auto</code>（自动转换）。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 下面的配置对象，传入的都是默认值</span>
<span class="token keyword">const</span> rtf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>RelativeTimeFormat</span><span class="token punctuation">(</span><span class="token string">&#39;en&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">localeMatcher</span><span class="token operator">:</span> <span class="token string">&#39;best fit&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 其他值：&#39;lookup&#39;</span>
  <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&#39;long&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 其他值：&#39;short&#39; or &#39;narrow&#39;</span>
  <span class="token literal-property property">numeric</span><span class="token operator">:</span> <span class="token string">&#39;always&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 其他值：&#39;auto&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Now, let’s try some special cases!</span>

rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1 day ago&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;in 0 days&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;in 1 day&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;week&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1 week ago&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;week&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;in 0 weeks&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;week&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;in 1 week&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码中，显示的是“1 day ago”，而不是“yesterday”；显示的是“in 0 weeks”，而不是“this week”。这是因为默认情况下，相对时间显示的是数值形式，而不是文字形式。</p><p>改变这个行为，可以把配置对象的<code>numeric</code>属性改成<code>auto</code>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> rtf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>RelativeTimeFormat</span><span class="token punctuation">(</span><span class="token string">&#39;en&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">numeric</span><span class="token operator">:</span> <span class="token string">&#39;auto&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;yesterday&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;today&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;tomorrow&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;week&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;last week&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;week&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;this week&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;week&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;next week&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="intl-relativetimeformat-prototype-format" tabindex="-1"><a class="header-anchor" href="#intl-relativetimeformat-prototype-format" aria-hidden="true">#</a> Intl.RelativeTimeFormat.prototype.format()</h2><p>相对时间实例对象的<code>format</code>方法，接受两个参数，依次为时间间隔的数值和单位。其中，“单位”是一个字符串，可以接受以下八个值。</p><ul><li>year</li><li>quarter</li><li>month</li><li>week</li><li>day</li><li>hour</li><li>minute</li><li>second</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> rtf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>RelativeTimeFormat</span><span class="token punctuation">(</span><span class="token string">&#39;en&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;day&quot;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;yesterday&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">2.15</span><span class="token punctuation">,</span> <span class="token string">&quot;day&quot;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;in 2.15 days</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="intl-relativetimeformat-prototype-formattoparts" tabindex="-1"><a class="header-anchor" href="#intl-relativetimeformat-prototype-formattoparts" aria-hidden="true">#</a> Intl.RelativeTimeFormat.prototype.formatToParts()</h2><p>相对时间实例对象的<code>formatToParts()</code>方法的参数跟<code>format()</code>方法一样，但是返回的是一个数组，用来精确控制相对时间的每个部分。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> rtf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>RelativeTimeFormat</span><span class="token punctuation">(</span><span class="token string">&#39;en&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">numeric</span><span class="token operator">:</span> <span class="token string">&#39;auto&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span> 
<span class="token comment">// &quot;yesterday&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">formatToParts</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [{ type: &quot;literal&quot;, value: &quot;yesterday&quot; }]</span>

rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;week&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;in 3 weeks&quot;</span>
rtf<span class="token punctuation">.</span><span class="token function">formatToParts</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;week&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [</span>
<span class="token comment">//   { type: &#39;literal&#39;, value: &#39;in &#39; },</span>
<span class="token comment">//   { type: &#39;integer&#39;, value: &#39;3&#39;, unit: &#39;week&#39; },</span>
<span class="token comment">//   { type: &#39;literal&#39;, value: &#39; weeks&#39; }</span>
<span class="token comment">// ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>返回数组的每个成员都是一个对象，拥有两个属性。</p><ul><li>type：字符串，表示输出值的类型。</li><li>value：字符串，表示输出的内容。</li><li>unit：如果输出内容表示一个数值（即<code>type</code>属性不是<code>literal</code>），那么还会有<code>unit</code>属性，表示数值的单位。</li></ul><h2 id="参考链接" tabindex="-1"><a class="header-anchor" href="#参考链接" aria-hidden="true">#</a> 参考链接</h2>`,25),r={href:"https://developers.google.com/web/updates/2018/10/intl-relativetimeformat",target:"_blank",rel:"noopener noreferrer"},k={href:"https://github.com/tc39/proposal-intl-relative-time#api",target:"_blank",rel:"noopener noreferrer"};function m(d,v){const a=p("ExternalLinkIcon");return o(),c("div",null,[u,n("ul",null,[n("li",null,[n("a",r,[s("The Intl.RelativeTimeFormat API"),t(a)]),s(", Mathias Bynens")]),n("li",null,[n("a",k,[s("Intl.RelativeTimeFormat API Specification"),t(a)]),s(", TC39")])])])}const g=e(i,[["render",m],["__file","intl-relativetimeformat.html.vue"]]);export{g as default};
